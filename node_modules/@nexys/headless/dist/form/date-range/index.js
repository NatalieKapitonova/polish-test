import React from "react";
import { isDateRangeDefined } from "./utils";
const DateRangeHeadless = (UI) => ({ onSuccess }) => {
    const [dateRange, setDateRange] = React.useState({});
    const [errors, setErrors] = React.useState({});
    const handleSubmit = (f) => {
        f.preventDefault();
        const errors = {};
        if (!dateRange.start) {
            errors.start = ["start date is required"];
        }
        if (!dateRange.end) {
            errors.end = ["end date is required"];
        }
        if (!isDateRangeDefined(dateRange, errors)) {
            setErrors(errors);
            return;
        }
        // compute timestamp (divide by to match transactions format)
        const t1 = new Date(dateRange.start).getTime() / 1000;
        const t2 = new Date(dateRange.end).getTime() / 1000;
        if (t2 < t1) {
            errors.start = ["start must be before end"];
            setErrors(errors);
            return;
        }
        // reset errors and update date
        setErrors({});
        onSuccess(t1, t2);
    };
    return (React.createElement(UI, { errors: errors, dateRange: dateRange, setDateRange: setDateRange, handleSubmit: handleSubmit }));
};
export default DateRangeHeadless;
