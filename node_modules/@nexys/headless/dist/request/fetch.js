export const fetchJSON = async (url, { method = "GET", data }) => {
    const body = data && JSON.stringify(data);
    const headers = { "content-type": "application/json" };
    const credentials = "same-origin";
    const options = { method, body, headers, credentials };
    const response = await fetch(url, options);
    const { status } = response;
    if (status === 500) {
        return Promise.reject({ status });
    }
    try {
        const responseJson = await response.json();
        if (status === 200 || status === 201) {
            return responseJson;
        }
        return Promise.reject({ status, data: responseJson });
    }
    catch (err) {
        throw Error("could not parse response to json");
    }
};
export const get = (url) => fetchJSON(url, { method: "GET" });
export const post = (url, data) => fetchJSON(url, { method: "POST", data });
export default fetchJSON;
