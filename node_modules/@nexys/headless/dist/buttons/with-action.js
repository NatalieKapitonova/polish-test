import React from 'react';
export var ActionState;
(function (ActionState) {
    ActionState[ActionState["idle"] = 0] = "idle";
    ActionState[ActionState["loading"] = 1] = "loading";
    ActionState[ActionState["success"] = 2] = "success";
    ActionState[ActionState["failed"] = 3] = "failed";
})(ActionState || (ActionState = {}));
const ApplyActionButton = (Btn) => ({ label, asyncAction, LoadingContent, SuccessContent, FailedContent }) => {
    const [state, setState] = React.useState(ActionState.idle);
    const [data, setData] = React.useState(undefined);
    const handleClick = async () => {
        setState(ActionState.loading);
        try {
            const r = await asyncAction();
            setData(r);
            setState(ActionState.success);
            return;
        }
        catch (err) {
            setState(ActionState.failed);
            return;
        }
    };
    return (React.createElement(Btn, { disabled: state === ActionState.loading, onClick: handleClick },
        React.createElement(React.Fragment, null,
            state === ActionState.idle && label,
            state === ActionState.loading && React.createElement(LoadingContent, null),
            state === ActionState.success && React.createElement(SuccessContent, { data: data }),
            state === ActionState.failed && React.createElement(FailedContent, null))));
};
export default ApplyActionButton;
