import React from "react";
import { Route, Routes, useLocation } from "react-router-dom";
import { getRoutePath, isSelectedFromArray } from "./utils";
const Navigation = (Ul, Li) => ({ tabs, allowsNested = true, pathPrefix = "" }) => {
    const location = useLocation();
    const getPath = (path) => pathPrefix + path;
    // sorting tabs so that nesting tabs work
    const sortedTabs = [...tabs].sort((a, b) => (b.path || "").length - (a.path || "").length);
    React.useEffect(() => {
        // path changed
        // console.log("s", location.pathname);
    }, [location]);
    // returns selected path
    const selectedPath = isSelectedFromArray(location.pathname, sortedTabs, pathPrefix);
    return (React.createElement(React.Fragment, null,
        React.createElement(Ul, null, tabs.map(({ label, path = "" }, i) => {
            const pathComplete = getPath(path);
            return (React.createElement(Li, { key: i, path: pathComplete, isSelected: path === selectedPath, label: label }));
        })),
        React.createElement(Routes, null, sortedTabs.map(({ path, Component }, i) => {
            const pathFinal = getRoutePath(path, allowsNested);
            return React.createElement(Route, { key: i, path: pathFinal, element: React.createElement(Component, null) });
        }))));
};
export default Navigation;
