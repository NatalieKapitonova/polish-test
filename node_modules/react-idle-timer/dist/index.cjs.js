var vt=Object.create,ie=Object.defineProperty;var Tt=Object.getOwnPropertyDescriptor;var It=Object.getOwnPropertyNames;var Et=Object.getPrototypeOf,bt=Object.prototype.hasOwnProperty;var Fe=t=>ie(t,"__esModule",{value:!0});var gt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),wt=(t,e)=>{for(var r in e)ie(t,r,{get:e[r],enumerable:!0})},yt=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of It(e))!bt.call(t,n)&&n!=="default"&&ie(t,n,{get:()=>e[n],enumerable:!(r=Tt(e,n))||r.enumerable});return t},$=t=>yt(Fe(ie(t!=null?vt(Et(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var Be=gt((ae,We)=>{(function(t,e){typeof ae=="object"&&typeof We!="undefined"?e(ae):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.fastUniqueNumbers={}))})(ae,function(t){"use strict";var e=function(f){return function(o){var h=f(o);return o.add(h),h}},r=function(f){return function(o,h){return f.set(o,h),h}},n=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,l=536870912,m=l*2,E=function(f,o){return function(h){var y=o.get(h),M=y===void 0?h.size:y<m?y+1:0;if(!h.has(M))return f(h,M);if(h.size<l){for(;h.has(M);)M=Math.floor(Math.random()*m);return f(h,M)}if(h.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;h.has(M);)M=Math.floor(Math.random()*n);return f(h,M)}},_=new WeakMap,ee=r(_),d=E(ee,_),u=e(d);t.addUniqueNumber=u,t.generateUniqueNumber=d,Object.defineProperty(t,"__esModule",{value:!0})})});Fe(exports);wt(exports,{DEFAULT_EVENTS:()=>ue,IdleTimerConsumer:()=>it,IdleTimerContext:()=>Z,IdleTimerProvider:()=>ot,createMocks:()=>Ke,useIdleTimer:()=>q,useIdleTimerContext:()=>st,withIdleTimer:()=>Ue,workerTimers:()=>$e});var se=$(require("react"));function Ue(t){return(0,se.forwardRef)(function(r,n){let l={...r};!l.onPrompt&&t.prototype.onPrompt&&(l.onPrompt=()=>{t.prototype.onPrompt()}),!l.onIdle&&t.prototype.onIdle&&(l.onIdle=()=>{t.prototype.onIdle()}),!l.onActive&&t.prototype.onActive&&(l.onActive=E=>{t.prototype.onActive(E)}),!l.onAction&&t.prototype.onAction&&(l.onAction=E=>{t.prototype.onAction(E)});let m=q(l);return typeof n=="function"?n(m):n&&(n.current=m),se.default.createElement(t,{...r,...m})})}var i=$(require("react"));var K=$(Be());var He=t=>t.method!==void 0&&t.method==="call";var Ge=t=>t.error===null&&typeof t.id=="number";var qe=t=>{let e=new Map([[0,()=>{}]]),r=new Map([[0,()=>{}]]),n=new Map,l=new Worker(t);return l.addEventListener("message",({data:d})=>{if(He(d)){let{params:{timerId:u,timerType:p}}=d;if(p==="interval"){let f=e.get(u);if(typeof f=="number"){let o=n.get(f);if(o===void 0||o.timerId!==u||o.timerType!==p)throw new Error("The timer is in an undefined state.")}else if(typeof f!="undefined")f();else throw new Error("The timer is in an undefined state.")}else if(p==="timeout"){let f=r.get(u);if(typeof f=="number"){let o=n.get(f);if(o===void 0||o.timerId!==u||o.timerType!==p)throw new Error("The timer is in an undefined state.")}else if(typeof f!="undefined")f(),r.delete(u);else throw new Error("The timer is in an undefined state.")}}else if(Ge(d)){let{id:u}=d,p=n.get(u);if(p===void 0)throw new Error("The timer is in an undefined state.");let{timerId:f,timerType:o}=p;n.delete(u),o==="interval"?e.delete(f):r.delete(f)}else{let{error:{message:u}}=d;throw new Error(u)}}),{clearInterval:d=>{let u=(0,K.generateUniqueNumber)(n);n.set(u,{timerId:d,timerType:"interval"}),e.set(d,u),l.postMessage({id:u,method:"clear",params:{timerId:d,timerType:"interval"}})},clearTimeout:d=>{let u=(0,K.generateUniqueNumber)(n);n.set(u,{timerId:d,timerType:"timeout"}),r.set(d,u),l.postMessage({id:u,method:"clear",params:{timerId:d,timerType:"timeout"}})},setInterval:(d,u)=>{let p=(0,K.generateUniqueNumber)(e);return e.set(p,()=>{d(),typeof e.get(p)=="function"&&l.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:p,timerType:"interval"}})}),l.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:p,timerType:"interval"}}),p},setTimeout:(d,u)=>{let p=(0,K.generateUniqueNumber)(r);return r.set(p,d),l.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:p,timerType:"timeout"}}),p}}};var Q=null,Ve=(t,e)=>()=>{if(Q!==null)return Q;let r=new Blob([e],{type:"application/javascript; charset=utf-8"}),n=URL.createObjectURL(r);return Q=t(n),Q.setTimeout(()=>URL.revokeObjectURL(n),0),Q};var je=`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`;var le=Ve(qe,je),Ye=t=>le().clearInterval(t),Je=t=>le().clearTimeout(t),ze=(t,e)=>le().setInterval(t,e),Xe=(t,e)=>le().setTimeout(t,e);var b=(typeof window=="undefined"?"undefined":typeof window)=="object";var v={setTimeout:b?setTimeout.bind(window):setTimeout,clearTimeout:b?clearTimeout.bind(window):clearTimeout,setInterval:b?setInterval.bind(window):setInterval,clearInterval:b?clearInterval.bind(window):clearInterval},$e={setTimeout:Xe,clearTimeout:Je,setInterval:ze,clearInterval:Ye};function Ke(){v.setTimeout=setTimeout,v.clearTimeout=clearTimeout,v.setInterval=setInterval,v.clearInterval=clearInterval}function Qe(t){v.setTimeout=t.setTimeout,v.clearTimeout=t.clearTimeout,v.setInterval=t.setInterval,v.clearInterval=t.clearInterval}var V={},Ze=class{constructor(e){this.closed=!1;this.mc=new MessageChannel;this.name=e,V[e]=V[e]||[],V[e].push(this),this.mc.port1.start(),this.mc.port2.start(),this.onStorage=this.onStorage.bind(this),window.addEventListener("storage",this.onStorage)}onStorage(e){if(e.storageArea!==window.localStorage||e.key.substring(0,this.name.length)!==this.name||e.newValue===null)return;let r=JSON.parse(e.newValue);this.mc.port2.postMessage(r)}postMessage(e){if(this.closed)throw new Error("InvalidStateError");let r=JSON.stringify(e),n=`${this.name}:${String(Date.now())}${String(Math.random())}`;window.localStorage.setItem(n,r),v.setTimeout(()=>{window.localStorage.removeItem(n)},500),V[this.name].forEach(l=>{l!==this&&l.mc.port2.postMessage(JSON.parse(r))})}close(){if(this.closed)return;this.closed=!0,this.mc.port1.close(),this.mc.port2.close(),window.removeEventListener("storage",this.onStorage);let e=V[this.name].indexOf(this);V[this.name].splice(e,1)}get onmessage(){return this.mc.port1.onmessage}set onmessage(e){this.mc.port1.onmessage=e}get onmessageerror(){return this.mc.port1.onmessageerror}set onmessageerror(e){this.mc.port1.onmessageerror=e}addEventListener(e,r){return this.mc.port1.addEventListener(e,r)}removeEventListener(e,r){return this.mc.port1.removeEventListener(e,r)}dispatchEvent(e){return this.mc.port1.dispatchEvent(e)}},et=typeof window=="undefined"?void 0:typeof window.BroadcastChannel=="function"?window.BroadcastChannel:Ze;function tt(t=0){return new Promise(e=>v.setTimeout(e,t))}var I=()=>b?performance.now():Date.now();function ce(){return I().toString(36).substring(2)}var c;(function(o){o[o.APPLY=0]="APPLY",o[o.TELL=1]="TELL",o[o.CLOSE=2]="CLOSE",o[o.REGISTER=3]="REGISTER",o[o.DEREGISTER=4]="DEREGISTER",o[o.IDLE=5]="IDLE",o[o.ACTIVE=6]="ACTIVE",o[o.PROMPT=7]="PROMPT",o[o.START=8]="START",o[o.RESET=9]="RESET",o[o.PAUSE=10]="PAUSE",o[o.RESUME=11]="RESUME",o[o.MESSAGE=12]="MESSAGE"})(c||(c={}));var be=class{constructor(e,r){this.token=ce();this.isLeader=!1;this.isDead=!1;this.isApplying=!1;this.reApply=!1;this.intervals=[];this.listeners=[];this.channel=e,this.options=r,this.apply=this.apply.bind(this),this.awaitLeadership=this.awaitLeadership.bind(this),this.sendAction=this.sendAction.bind(this)}async apply(){if(this.isLeader||this.isDead)return!1;if(this.isApplying)return this.reApply=!0,!1;this.isApplying=!0;let e=!1,r=n=>{let{token:l,action:m}=n.data;l!==this.token&&(m===c.APPLY&&l>this.token&&(e=!0),m===c.TELL&&(e=!0))};this.channel.addEventListener("message",r);try{return this.sendAction(c.APPLY),await tt(this.options.responseTime),this.channel.removeEventListener("message",r),this.isApplying=!1,e?this.reApply?this.apply():!1:(this.assumeLead(),!0)}catch{return!1}}awaitLeadership(){if(this.isLeader)return Promise.resolve();let e=!1,r=null;return new Promise(n=>{let l=()=>{if(e)return;e=!0,v.clearInterval(r);let E=this.intervals.indexOf(r);this.intervals.splice(E,1),this.channel.removeEventListener("message",m),n()};r=v.setInterval(()=>{this.apply().then(()=>{this.isLeader&&l()})},this.options.fallbackInterval),this.intervals.push(r);let m=E=>{let{action:_}=E.data;_===c.CLOSE&&this.apply().then(()=>{this.isLeader&&l()})};this.channel.addEventListener("message",m)})}sendAction(e){this.channel.postMessage({action:e,token:this.token})}assumeLead(){this.isLeader=!0;let e=r=>{let{action:n}=r.data;n===c.APPLY&&this.sendAction(c.TELL)};return this.channel.addEventListener("message",e),this.listeners.push(e),this.sendAction(c.TELL)}waitForLeadership(){return this.deferred?this.deferred:(this.deferred=this.awaitLeadership(),this.deferred)}close(){this.isDead||(this.isDead=!0,this.isLeader=!1,this.sendAction(c.CLOSE),this.listeners.forEach(e=>this.channel.removeEventListener("message",e)),this.intervals.forEach(e=>v.clearInterval(e)))}};var x;(function(n){n[n.PROMPTED=0]="PROMPTED",n[n.ACTIVE=1]="ACTIVE",n[n.IDLE=2]="IDLE"})(x||(x={}));var ge=class{constructor(e){this.token=ce();this.registry=new Map;this.allIdle=!1;let{channelName:r}=e;if(this.options=e,this.channel=new et(r),this.registry.set(this.token,1),e.leaderElection){let n={fallbackInterval:2e3,responseTime:100};this.elector=new be(this.channel,n),this.elector.waitForLeadership()}this.channel.addEventListener("message",n=>{let{action:l,token:m,data:E}=n.data;switch(l){case c.REGISTER:this.registry.set(m,1);break;case c.DEREGISTER:this.registry.delete(m);break;case c.IDLE:this.idle(m);break;case c.ACTIVE:this.active(m);break;case c.PROMPT:this.prompt(m);break;case c.MESSAGE:this.options.onMessage(E);break;case c.START:this.options.start(!0);break;case c.RESET:this.options.reset(!0);break;case c.PAUSE:this.options.pause(!0);break;case c.RESUME:this.options.resume(!0);break}}),this.send(c.REGISTER)}get isLeader(){if(!this.elector)throw new Error('\u274C Leader election is not enabled. To Enable it set the "leaderElection" property to true.');return this.elector.isLeader}prompt(e=this.token){this.registry.set(e,0);let r=[...this.registry.values()].every(n=>n===0);e===this.token&&this.send(c.PROMPT),r&&this.options.onPrompt()}idle(e=this.token){this.registry.set(e,2);let r=[...this.registry.values()].every(n=>n===2);e===this.token&&this.send(c.IDLE),!this.allIdle&&r&&(this.allIdle=!0,this.options.onIdle())}active(e=this.token){this.registry.set(e,1);let r=[...this.registry.values()].some(n=>n===1);e===this.token&&this.send(c.ACTIVE),this.allIdle&&r&&(this.allIdle=!1,this.options.onActive())}sync(){try{this.channel.postMessage({action:c.RESET,token:this.token})}catch{}}message(e){try{this.channel.postMessage({action:c.MESSAGE,token:this.token,data:e})}catch{}}send(e){try{this.channel.postMessage({action:e,token:this.token})}catch{}}close(){this.options.leaderElection&&this.elector.close(),this.send(c.DEREGISTER),this.channel.close()}};var rt=b?document:null,ue=["mousemove","keydown","wheel","DOMMouseScroll","mousewheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove","visibilitychange"];var me=$(require("react"));function N(t){let e=(0,me.useRef)(t);return(0,me.useEffect)(()=>{e.current=t},[t]),e}function nt(t,e){let r;function n(...l){r&&clearTimeout(r),r=setTimeout(()=>{t(...l),r=null},e)}return n.cancel=function(){clearTimeout(r)},n}function de(t,e){let r=0;return function(...n){let l=new Date().getTime();if(!(l-r<e))return r=l,t(...n)}}function q({timeout:t=1e3*60*20,promptTimeout:e=0,element:r=rt,events:n=ue,timers:l=void 0,immediateEvents:m=[],onPrompt:E=()=>{},onIdle:_=()=>{},onActive:ee=()=>{},onAction:d=()=>{},onMessage:u=()=>{},debounce:p=0,throttle:f=0,eventsThrottle:o=200,startOnMount:h=!0,startManually:y=!1,stopOnIdle:M=!1,crossTab:B=!1,name:we="idle-timer",syncTimers:Y=0,leaderElection:ye=!1}={}){let J=(0,i.useRef)(I()),Le=(0,i.useRef)(Date.now()),pe=(0,i.useRef)(I()),R=(0,i.useRef)(null),A=(0,i.useRef)(null),z=(0,i.useRef)(0),T=(0,i.useRef)(!0),P=(0,i.useRef)(!1),F=(0,i.useRef)(!0),X=(0,i.useRef)(!1),g=(0,i.useRef)(!1),L=(0,i.useRef)(0),O=(0,i.useRef)(0),D=(0,i.useRef)(null),a=(0,i.useRef)(null),C=N(t),te=N(e),at=N(M),Me=(0,i.useRef)(m),fe=(0,i.useRef)(r),he=(0,i.useRef)([...new Set([...n,...m]).values()]),ke=N(_),re=N(ee),xe=N(E),ne=N(u),w=(0,i.useRef)();(0,i.useEffect)(()=>{w.current&&w.current.cancel&&w.current.cancel(),p>0?w.current=nt(d,p):f>0?w.current=de(d,f):w.current=d},[d,f,p]);let Pe=(0,i.useRef)();(0,i.useEffect)(()=>{B&&Y&&(Pe.current=de(()=>{a.current.sync()},Y))},[B,Y]);let S=()=>{D.current!==null&&(v.clearTimeout(D.current),D.current=null)},H=(s,k=!0)=>{S(),D.current=v.setTimeout(ve,s||C.current),k&&(A.current=I())},Se=s=>{L.current=0,O.current=I(),g.current=!0,H(te.current,!1),xe.current(s)},Re=()=>{T.current=!0,R.current=I(),at.current?(S(),W()):g.current&&(O.current=0,g.current=!1),ke.current()},Ae=s=>{g.current=!1,O.current=0,T.current=!1,z.current+=I()-R.current,U(),H(),re.current(s)},ve=s=>{if(!T.current){if(w.current.cancel&&w.current.cancel(),te.current>0&&!g.current){a.current?a.current.prompt():Se(s);return}a.current?a.current.idle():Re();return}a.current?a.current.active():Ae(s)},Oe=s=>{if(w.current(s),g.current)return;B&&Y&&Pe.current(),S();let k=I()-A.current;if((T.current&&!M||!T.current&&k>C.current)&&ve(s),P.current=!1,L.current=0,O.current=0,!T.current&&Me.current.includes(s.type)){ve(s);return}H(),a.current&&a.current.active()},oe=(0,i.useRef)();(0,i.useEffect)(()=>{let s=X.current;s&&W(),o>0?oe.current=de(Oe,o):oe.current=Oe,s&&U()},[o,B,Y]);let U=()=>{!b||X.current||(he.current.forEach(s=>{fe.current.addEventListener(s,oe.current,{capture:!0,passive:!0})}),X.current=!0)},W=(s=!1)=>{!b||(X.current||s)&&(he.current.forEach(k=>{fe.current.removeEventListener(k,oe.current,{capture:!0})}),X.current=!1)},G=(0,i.useCallback)(s=>{S(),U(),g.current&&re.current(),T.current=!1,g.current=!1,P.current=!1,L.current=0,O.current=0,a.current&&!s&&(a.current.active(),a.current.send(c.START)),H()},[D,T,C,a]),Te=(0,i.useCallback)(s=>{S(),U(),T.current=!1,g.current=!1,P.current=!1,L.current=0,O.current=0,pe.current=I(),a.current&&(a.current.allIdle=!1,s||a.current.send(c.RESET)),y||H()},[D,T,C,y,a]),Ie=(0,i.useCallback)((s=!1)=>P.current?!1:(L.current=De(),P.current=!0,W(),S(),a.current&&(s||a.current.send(c.PAUSE)),!0),[D,a]),Ee=(0,i.useCallback)((s=!1)=>P.current?(P.current=!1,g.current||U(),T.current||H(L.current),O.current&&(O.current=I()),a.current&&(s||a.current.send(c.RESUME)),!0):!1,[D,C,L,a]),lt=(0,i.useCallback)((s,k)=>{a.current?(k&&ne.current(s),a.current.message(s)):k&&ne.current(s)},[u]),ct=(0,i.useCallback)(()=>T.current,[T]),ut=(0,i.useCallback)(()=>g.current,[g]),mt=(0,i.useCallback)(()=>{if(!a.current)throw new Error('\u274C Cross Tab feature is not enabled. To enable it set the "crossTab" property to true.');return a.current.isLeader},[a]),De=(0,i.useCallback)(()=>{if(P.current)return L.current;let s=L.current?L.current:te.current+C.current,k=A.current?I()-A.current:0,_e=Math.ceil(s-k);return _e<0?0:Math.abs(_e)},[C,te,g,L,A]),dt=(0,i.useCallback)(()=>Math.round(I()-pe.current),[pe]),Ce=(0,i.useCallback)(()=>Math.round(I()-J.current),[J]),pt=(0,i.useCallback)(()=>R.current?new Date(Le.current-J.current+R.current):null,[R]),ft=(0,i.useCallback)(()=>A.current?new Date(Le.current-J.current+A.current):null,[A]),Ne=(0,i.useCallback)(()=>T.current?Math.round(I()-R.current+z.current):Math.round(z.current),[R,z]),ht=(0,i.useCallback)(()=>{let s=Math.round(Ce()-Ne());return s>=0?s:0},[J,R,z]);return(0,i.useEffect)(()=>{if(p>0&&f>0)throw new Error("\u274C onAction can either be throttled or debounced, not both.");l&&Qe(l);let s=()=>{a.current&&a.current.close(),w.current.cancel&&w.current.cancel(),S(),W(!0)};return b&&window.addEventListener("beforeunload",s),()=>{b&&window.removeEventListener("beforeunload",s),a.current&&a.current.close(),w.current.cancel&&w.current.cancel(),S(),W(!0)}},[]),(0,i.useEffect)(()=>{a.current&&a.current.close(),B?a.current=new ge({channelName:we,leaderElection:ye,onPrompt:()=>{Se()},onIdle:()=>{Re()},onActive:()=>{Ae()},onMessage:ne.current,start:G,reset:Te,pause:Ie,resume:Ee}):a.current=null},[B,we,ye,xe,ke,re,ne,G,Te,Ie,Ee]),(0,i.useEffect)(()=>{S(),W(!0),F.current||(P.current=!0,T.current=!0,L.current=0),!y&&(h?G():U())},[y,h,F]),(0,i.useEffect)(()=>{if(!F.current){let s=[...new Set([...n,...m]).values()];if(W(),he.current=s,fe.current=r,Me.current=m,y)return;h?G():U()}},[r,JSON.stringify(n),JSON.stringify(m),F,y,h]),(0,i.useEffect)(()=>{if(F.current)F.current=!1;else{if(C.current=t,y)return;T.current&&(re.current(),a.current&&a.current.active()),G()}},[t,a,y,F,T]),{message:lt,start:G,reset:Te,pause:Ie,resume:Ee,isIdle:ct,isPrompted:ut,isLeader:mt,getRemainingTime:De,getElapsedTime:dt,getTotalElapsedTime:Ce,getLastIdleTime:pt,getLastActiveTime:ft,getTotalIdleTime:Ne,getTotalActiveTime:ht}}var j=$(require("react"));var Z=(0,j.createContext)(null);function ot(t){let e=q(t);return j.default.createElement(Z.Provider,{value:e},t.children)}var it=Z.Consumer;function st(){return(0,j.useContext)(Z)}
